<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eco Academia - Users</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/users.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  </head>
  <body>
    <aside class="sidebar" role="navigation" aria-label="Main Navigation">
      <header class="sidebar-header">
        <div class="sidebar-title">
          <span>Eco Academia</span>
        </div>
      </header>
      <nav class="sidebar-content">
        <section class="sidebar-section">
          <ul role="list">
            <li>
              <a href="dashboard.html"><span class="icon" aria-hidden="true">â¬œ</span> Dashboard</a>
            </li>
            <li class="active">
              <a href="users.html" aria-current="page"><span class="icon" aria-hidden="true">ðŸ‘¤</span> Users</a>
            </li>
            <li>
              <a href="quiz-manager.html"><span class="icon" aria-hidden="true">ðŸ“‹</span> Quiz Manager</a>
            </li>
            <li>
              <a href="#"><span class="icon" aria-hidden="true">ðŸ“ˆ</span> Reports</a>
            </li>
            <li>
              <a href="#"><span class="icon" aria-hidden="true">âš™</span> Settings</a>
            </li>
          </ul>
        </section>
      </nav>
      <footer class="sidebar-bottom">
        <div class="sidebar-profile">
          <div class="sidebar-profile-img">
            <div class="profile-icon" aria-label="Admin Profile">A</div>
          </div>
          <div class="sidebar-profile-info">
            <span class="sidebar-profile-name">Admin Account</span>
            <span class="sidebar-profile-email">admin@eco-academia.com</span>
          </div>
        </div>
      </footer>
    </aside>

    <main class="main-content" role="main">
      <div class="container-fluid">
        <header class="row">
          <div class="col-12">
            <h1>User Management</h1>
          </div>
        </header>

          <!-- Search and Filter Controls -->
          <section class="row controls-section">
            <div class="col-md-6 col-sm-12">
              <div class="search-container">
                <label for="user-search" class="form-label">Search Users</label>
                <input type="text" id="user-search" class="form-control search-input" 
                       placeholder="Search users by name, email, or ID..."
                       aria-describedby="search-help">
                <small id="search-help" class="form-text">Search through all user records</small>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="filter-container">
                <label for="status-filter" class="form-label">Status Filter</label>
                <select id="status-filter" class="form-select status-filter">
                  <option value="">All Users</option>
                  <option value="active">Active</option>
                  <option value="inactive">Inactive</option>
                </select>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="filter-container">
                <label for="progress-filter" class="form-label">Progress Filter</label>
                <select id="progress-filter" class="form-select progress-filter">
                  <option value="">All Progress</option>
                  <option value="high">High (80%+)</option>
                  <option value="medium">Medium (50-79%)</option>
                  <option value="low">Low (0-49%)</option>
                </select>
              </div>
            </div>
          </section>

          <!-- Statistics Cards -->
          <section class="row stats-section">
            <div class="col-md-3 col-sm-6">
              <div class="card stat-card">
                <div class="card-body">
                  <h6 class="card-title">Total Users</h6>
                  <div class="stat-value" id="total-users">0</div>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="card stat-card">
                <div class="card-body">
                  <h6 class="card-title">Active Users</h6>
                  <div class="stat-value" id="active-users">0</div>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="card stat-card">
                <div class="card-body">
                  <h6 class="card-title">Avg Progress</h6>
                  <div class="stat-value" id="avg-progress">0%</div>
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="card stat-card">
                <div class="card-body">
                  <h6 class="card-title">New Users</h6>
                  <div class="stat-value" id="new-users">0</div>
                </div>
              </div>
            </div>
          </section>

          <!-- Users Table -->
          <section class="row table-section">
            <div class="col-12">
              <div class="card users-table-card">
                <div class="card-header">
                  <h3 class="card-title">User List</h3>
                  <div class="header-actions">
                    <button type="button" class="btn btn-success add-user-btn" id="add-user-btn">
                      <span class="btn-icon">+</span> Add User
                    </button>
                    <div class="results-info">
                      <span id="results-count">Showing 0 users</span>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table users-table" id="users-table">
                      <thead>
                        <tr>
                          <th>
                            <button class="sort-btn" data-sort="name">
                              Name
                              <span class="sort-arrow">â–²</span>
                            </button>
                          </th>
                          <th>
                            <button class="sort-btn" data-sort="email">
                              Email
                              <span class="sort-arrow">â–²</span>
                            </button>
                          </th>
                          <th>
                            <button class="sort-btn" data-sort="status">
                              Status
                              <span class="sort-arrow">â–²</span>
                            </button>
                          </th>
                          <th>
                            <button class="sort-btn" data-sort="progress">
                              Progress
                              <span class="sort-arrow">â–²</span>
                            </button>
                          </th>
                          <th>
                            <button class="sort-btn" data-sort="joinDate">
                              Join Date
                              <span class="sort-arrow">â–²</span>
                            </button>
                          </th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody id="users-tbody">
                        <!-- User rows will be populated by JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addUserModalLabel">Add New User</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="add-user-form">
              <div class="row">
                <div class="col-md-6">
                  <div class="user-detail-card">
                    <h6>User Information</h6>
                    <div class="mb-3">
                      <label for="add-name" class="form-label">Name *</label>
                      <input type="text" class="form-control" id="add-name" required>
                    </div>
                    <div class="mb-3">
                      <label for="add-email" class="form-label">Email *</label>
                      <input type="email" class="form-control" id="add-email" required>
                    </div>
                    <div class="mb-3">
                      <label for="add-status" class="form-label">Status</label>
                      <select class="form-select" id="add-status">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="user-detail-card">
                    <h6>Information</h6>
                    <div class="info-note">
                      <small>* Required fields</small>
                      <br>
                      <small>Other fields will be set to default values</small>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success" id="save-new-user-btn">Add User</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <!-- User Details Modal -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="userModalLabel">User Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="modal-body">
            <!-- User details will be populated by JavaScript -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="edit-user-btn">Edit User</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to delete this user?</p>
            <div class="user-info">
              <p><strong>Name:</strong> <span id="delete-user-name"></span></p>
              <p><strong>Email:</strong> <span id="delete-user-email"></span></p>
            </div>
            <div class="alert alert-warning">
              <small>This action cannot be undone.</small>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" id="confirm-delete-btn">Delete User</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/users.js"></script>
  </body>
</html>
